{% extends '../base.html' %}
{% block content %}

<div class="content-section">
   
   <form method="GET" action="">
      <fieldset>
          <legend class="border-bottom pd-2 mb-4 text-center">Filter Sales Summary</legend>
          
          <div class="mb-3">
              <label for="start_date" class="form-label">Start Date</label>
              <input type="text" name="start_date" class="form-control date-picker" id="start_date" value="{{ request.GET.start_date }}">
          </div>
          <div class="mb-3">
              <label for="end_date" class="form-label">End Date</label>
              <input type="text" name="end_date" class="form-control date-picker" id="end_date" value="{{ request.GET.end_date }}">
          </div>
      </fieldset>
      <div class="form-group pt-4 text-center">
          <button type="submit" class="btn btn-outline-primary">Filter</button>
      </div>
  </form>

</div>

<div class="content-section">
    <div>
        <table class="table table-striped table-bordered table-hover mt-4">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Product Name</th>
                    <th scope="col">Label</th>
                    <th scope="col">Size</th>
                    <th scope="col">latest sales quantity</th>
                    <th scope="col">Latest sales amount</th>
                    <th scope="col">Cumulative Quantity Sold</th>
                    <th scope="col">Cumulative Sales</th>

                </tr>
            </thead>
            <tbody>
                {% for sale in sales_data %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ sale.name }}</td>
                    <td>{{ sale.label }}</td>
                    <td>{{ sale.size }}</td>
                    <td>{{ sale.total_quantity_sold }}</td>
                    <td>{{ sale.total_sales }}</td>
                    <td>{{ sale.cumulative_quantity_sold }}</td>
                    <td>{{ sale.cumulative_sales }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<script src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script>
   $(function() {
       $('input[name="start_date"], input[name="end_date"]').daterangepicker({
           singleDatePicker: true,
           showDropdowns: true,
           locale: {
               format: 'YYYY-MM-DD'
           }
       });
   });
   </script>
   
{% endblock %}